{% extends 'base.html' %}
{% load static %}

{% block body %}

<main id="main">

  <!-- ======= Breadcrumbs ======= -->
  <div class="breadcrumbs d-flex align-items-center" style="background-image: url('{% static 'assets/img/breadcrumbs-bg.jpg' %}');">
    <div class="container position-relative d-flex flex-column align-items-center" data-scroll-fade>
      <h2>Projects</h2>
      <ol>
        <li><a href="/">Home</a></li>
        <li>Projects</li>
      </ol>
    </div>
  </div>

  <!-- ======= Projects Section ======= -->
  <section class="section">
    <div class="container py-3 mt-2 text-center" data-scroll-slide-up>
      <h2 class="display-5 fw-bold mb-4">ðŸ›  Our Projects</h2>
    </div>

    <div class="container pb-5">
      <div class="row g-4">
        {% for project in projects %}  <!-- âœ… ØªÙ… Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ -->
        <div class="col-md-4 col-sm-6" data-scroll-zoom-in>
          <div class="card border-0 shadow-sm h-100 text-center custom-project-card">

            <!-- Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
            {% if project.main_image %}
              <a href="{% url 'ourproject:project_details' project.pk %}">
                <img src="{{ project.main_image.url }}" 
                     class="card-img-top uniform-img" 
                     alt="{{ project.name }}" 
                     loading="lazy">
              </a>
            {% else %}
              <a href="{% url 'ourproject:project_details' project.pk %}">
                <img src="{% static 'img/no-image.jpg' %}" 
                     class="card-img-top uniform-img" 
                     alt="No image available" 
                     loading="lazy">
              </a>
            {% endif %}

            <div class="card-body p-4">
              <h5 class="card-title">
                <a href="{% url 'ourproject:project_details' project.pk %}" class="text-decoration-none text-dark custom-link">
                  {{ project.name }}
                </a>
              </h5>
              <p class="card-text text-muted">{{ project.description|truncatewords:20 }}</p>
            </div>
          </div>
        </div>
        {% empty %}
          <p class="text-center" data-scroll-fade>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø´Ø§Ø±ÙŠØ¹ Ø­Ø§Ù„ÙŠØ§Ù‹.</p>
        {% endfor %}
      </div>
    </div>
  </section>

</main>

<!-- Scroll Animations Script -->
<script>
document.addEventListener("DOMContentLoaded", function () {
  const observerOptions = {
    threshold: 0.1,
    rootMargin: "0px 0px -50px 0px",
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add("animated");
        observer.unobserve(entry.target);
      }
    });
  }, observerOptions);

  document.querySelectorAll("[data-scroll-fade]").forEach(el => {
    el.style.opacity = 0;
    el.style.transition = "opacity 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94)";
    observer.observe(el);
    el.classList.add("animated");
  });

  document.querySelectorAll("[data-scroll-slide-up]").forEach(el => {
    el.style.opacity = 0;
    el.style.transform = "translateY(30px)";
    el.style.transition = "opacity 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94)";
    observer.observe(el);
    el.classList.add("animated");
  });

  document.querySelectorAll("[data-scroll-zoom-in]").forEach((el, index) => {
    el.style.opacity = 0;
    el.style.transform = "scale(0.95)";
    el.style.transition = `opacity 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) ${index * 0.1}s`;
    observer.observe(el);
    el.classList.add("animated");
  });

  // Trigger animations after observing
  setTimeout(() => {
    document.querySelectorAll("[data-scroll-fade].animated").forEach(el => {
      el.style.opacity = 1;
    });
    document.querySelectorAll("[data-scroll-slide-up].animated").forEach(el => {
      el.style.opacity = 1;
      el.style.transform = "translateY(0)";
    });
    document.querySelectorAll("[data-scroll-zoom-in].animated").forEach(el => {
      el.style.opacity = 1;
      el.style.transform = "scale(1)";
    });
  }, 100);
});
</script>

<style>
/* ===== Custom Styles ===== */
.uniform-img {
  width: 100%;
  height: 250px;
  aspect-ratio: 4 / 3;
  object-fit: cover;
  border-radius: 0.5rem;
  transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.custom-project-card {
  border-radius: 0.75rem;
  overflow: hidden;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
  transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), box-shadow 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  background-color: white;
  display: flex;
  flex-direction: column;
  min-height: 350px;
}

.custom-project-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
}

.uniform-img:hover {
  transform: scale(1.03);
}

.custom-link {
  color: #1f2937;
  transition: color 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.custom-link:hover {
  color: #3b82f6;
}

/* ===== Responsive Adjustments ===== */

/* Ù„Ù„Ø´Ø§Ø´Ø© Ø§Ù„ÙƒØ¨ÙŠØ±Ø© (Ù„Ø§Ø¨/Ø¯ÙŠØ³Ùƒ ØªÙˆØ¨) */
@media (min-width: 577px) {
  .uniform-img {
    height: 500px;
    aspect-ratio: 4 / 3;
  }
  .custom-project-card {
    min-height: 350px;
  }
}

/* Ù„Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ */
@media (max-width: 576px) {
  .uniform-img {
    height: auto;
    aspect-ratio: 3 / 4; /* ØµÙˆØ±Ø© Ø£Ø·ÙˆÙ„ â€” Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ */
  }
  .custom-project-card {
    min-height: 400px;
  }
  .col-sm-6 {
    margin-bottom: 1.5rem;
  }
}

/* ===== Animation Classes ===== */
[data-scroll-fade],
[data-scroll-slide-up],
[data-scroll-zoom-in] {
  opacity: 0;
}

.animated {
  opacity: 1 !important;
  transition: opacity 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}
</style>

{% endblock %}